# Navicon.Go.CRM.Lesson 8

Задание 5. Программирование серверных расширений 

1. При создании объекта счет, проверять заполненность поля Тип Счета. Если [Тип счета] не задан, устанавливать значение Тип счета = [Вручную].

2. Написать плагин, который бы автоматически заполнял поле [Дата первого договора] 
на объекте Контакт.  Поле заполняется датой договора из объекта Договор, при условии, что создаваемый договор – первый.

3. Написать плагин, который бы автоматически пересчитывал поле [Оплаченная Сумма] в объекте Договор при создании счета со статусом оплачено, изменении 
поля [Оплачено] на значение Оплачено, удалении оплаченного счета. 

4. При указании на счете статуса со значением оплачено или при переводе счета в состояние оплачено:
    - проверять не превысила ли общая сумма всех оплаченных счетов, общей суммы в объекте Договоре. Если превысила, показывать сообщение об ошибке с соответствующим сообщением. 
    - Если сохранение успешно, проставлять в поле Дата Оплаты текущую дату.

5. Если значение в поле [Оплаченная сумма] на объекте Договор равна значению в поле Сумма на договоре – автоматически проставлять значение = "Да" в поле [Оплачен].
 
6. Для объекта Средство связи реализовать логику, которая позволяет иметь только один объект Средство связи для контакта с Типом = Телефон и Основной = "Да". 
Реализовать логику, которая позволяет иметь только один объект Средство связи для контакта с Типом = "E-mail" и Основной = "Да"


Documentation:
https://docs.microsoft.com/en-us/dotnet/api/microsoft.xrm.sdk?view=dynamics-general-ce-9